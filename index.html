<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahsan Javed - Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: #0a0a14;
            color: #ffffff;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.9), rgba(30, 30, 40, 0.8));
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 150, 200, 0.4);
            margin: 20px auto;
            max-width: 900px;
            position: relative;
            overflow: hidden;
        }
        header .motion-graphics {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.6;
        }
        header img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 4px solid #00b7cc;
            box-shadow: 0 0 20px rgba(0, 150, 200, 0.6);
            transition: transform 0.3s ease;
            position: relative;
            z-index: 1;
        }
        header img:hover {
            transform: scale(1.1) rotate(8deg);
        }
        header h1 {
            font-size: 2.8em;
            background: linear-gradient(45deg, #00b7cc, #ffca28);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(0, 150, 200, 0.5);
            margin: 15px 0;
            animation: textGlow 3s infinite ease-in-out;
            position: relative;
            z-index: 1;
        }
        header p {
            font-size: 1.3em;
            color: #d1d9e6;
            position: relative;
            z-index: 1;
        }
        .section {
            margin: 40px 0;
            padding: 25px;
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.8), rgba(20, 20, 30, 0.9));
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 150, 200, 0.3);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .section:hover {
            transform: translateY(-8px);
        }
        .section h2 {
            font-size: 1.8em;
            background: linear-gradient(45deg, #00b7cc, #ffca28);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            position: relative;
        }
        .card {
            background: linear-gradient(135deg, rgba(40, 40, 50, 0.9), rgba(20, 20, 30, 0.95));
            padding: 20px;
            border-radius: 10px;
            border: 2px solid rgba(0, 150, 200, 0.4);
            box-shadow: 0 5px 20px rgba(0, 150, 200, 0.2);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            min-height: 280px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 25px rgba(0, 150, 200, 0.4);
            border-color: #ffca28;
        }
        .card img {
            width: 200px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
            position: relative;
            z-index: 1;
        }
        .card:hover img {
            transform: scale(1.08);
        }
        .card h3 {
            font-size: 1.2em;
            color: #ffffff;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        .section .motion-graphics {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }
        .section:hover .motion-graphics {
            opacity: 0.8;
        }
        .motion-graphics canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(45deg, #00b7cc, #00aaff);
            color: #ffffff;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        .btn:hover {
            background: linear-gradient(45deg, #ffca28, #ffb74d);
            transform: scale(1.05);
        }
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, rgba(20, 20, 30, 0.9), rgba(30, 30, 40, 0.8));
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 150, 200, 0.3);
            border: 2px solid #00b7cc;
            z-index: 1000;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            display: none;
            color: #ffffff;
        }
        .popup.visible {
            display: block;
            transform: translate(-50%, -50%) scale(1);
            transition: transform 0.3s ease;
        }
        .popup h2 {
            font-size: 1.6em;
            background: linear-gradient(45deg, #00b7cc, #ffca28);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
        }
        .popup p {
            font-size: 1.1em;
            color: #d1d9e6;
            margin-bottom: 20px;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 999;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .overlay.visible {
            display: block;
            opacity: 1;
        }
        @keyframes pulseGlow {
            0% { opacity: 0.3; transform: scale(0.9); }
            50% { opacity: 0.5; transform: scale(1.05); }
            100% { opacity: 0.3; transform: scale(0.9); }
        }
        @keyframes textGlow {
            0% { text-shadow: 0 0 10px rgba(0, 150, 200, 0.5); }
            50% { text-shadow: 0 0 20px rgba(0, 150, 200, 0.7); }
            100% { text-shadow: 0 0 10px rgba(0, 150, 200, 0.5); }
        }
        @media (max-width: 768px) {
            header img { width: 120px; height: 120px; }
            header h1 { font-size: 2.2em; }
            header p { font-size: 1.1em; }
            .section { padding: 15px; }
            .section h2 { font-size: 1.5em; }
            .card img { width: 180px; height: 100px; }
            .popup { max-width: 400px; padding: 15px; }
            .motion-graphics { opacity: 0.4; }
        }
        @media (max-width: 480px) {
            header { padding: 40px 10px; }
            header img { width: 100px; height: 100px; }
            header h1 { font-size: 1.8em; }
            header p { font-size: 1em; }
            .card img { width: 160px; height: 90px; }
            .popup { max-width: 320px; }
            .motion-graphics { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>
    <div class="container">
        <header>
            <div class="motion-graphics">
                <canvas id="header-motion-canvas"></canvas>
            </div>
            <img src="my image.jpg" alt="Ahsan Javed">
            <h1>AHSAN JAVED</h1>
            <p>Biomedical Engineer | Machine Learning Enthusiast</p>
        </header>
        <div class="section">
            <h2>About Me</h2>
            <p>Hey, I’m Ahsan Javed—a Biomedical Engineer who’s all about mixing tech with healthcare to make cool things happen. I’m hooked on Machine Learning, messing with biomedical signals, and digging into data to figure out stuff that actually helps. Whether it’s building gadgets that make doctor stuff easier or crunching numbers to unlock bio-secrets, I’m here for it. Check out my projects, certifications, and skills below, and hit me up if you wanna team up and make something for the world!</p>
        </div>
        <div class="section">
            <h2>Projects</h2>
            <div class="grid" id="projects">
                <div class="motion-graphics">
                    <canvas id="projects-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Machine Learning Projects</h2>
            <div class="grid" id="ml-projects">
                <div class="motion-graphics">
                    <canvas id="ml-projects-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Internships</h2>
            <div class="grid" id="internships">
                <div class="motion-graphics">
                    <canvas id="internships-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Extra Curricular Participation</h2>
            <div class="grid" id="extracurricular">
                <div class="motion-graphics">
                    <canvas id="extracurricular-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Poster Presentations</h2>
            <div class="grid" id="posters">
                <div class="motion-graphics">
                    <canvas id="posters-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Certifications</h2>
            <div class="grid" id="certifications">
                <div class="motion-graphics">
                    <canvas id="certifications-motion-canvas"></canvas>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Skills</h2>
            <p>Python, Machine Learning, Video Editing, Canva, Google Ads, Media Marketing</p>
        </div>
        <div class="section">
            <h2>Contact</h2>
            <p>Email: beingahsan12@gmail.com</p>
            <p>GitHub: <a href="https://github.com/Ahsan12152003" target="_blank" class="btn">GitHub</a></p>
            <p>LinkedIn: <a href="https://www.linkedin.com/in/ahsan-javed-2093352b7/" target="_blank" class="btn">LinkedIn</a></p>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="popup" id="popup">
        <h2 id="popup-title"></h2>
        <p id="popup-description"></p>
        <div id="popup-github" style="display: none;">
            <a id="github-link" href="#" target="_blank" class="btn">View on GitHub</a>
        </div>
        <button class="btn" onclick="closePopup()">Close</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        // Utility: Debounce function to throttle resize events
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Three.js Particle System for Background
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bgCanvas'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = 30;

        const particleCount = 4000; // Reduced from 8000
        const particlesGeometry = new THREE.BufferGeometry();
        const posArray = new Float32Array(particleCount * 3);
        const velocities = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);

        for (let i = 0; i < particleCount * 3; i += 3) {
            posArray[i] = (Math.random() - 0.5) * 100;
            posArray[i + 1] = (Math.random() - 0.5) * 100;
            posArray[i + 2] = (Math.random() - 0.5) * 100;
            velocities[i] = (Math.random() - 0.5) * 0.02; // Reduced from 0.03
            velocities[i + 1] = (Math.random() - 0.5) * 0.02;
            velocities[i + 2] = (Math.random() - 0.5) * 0.02;
            const t = Math.random();
            colors[i] = t * 0 + (1 - t) * 0;
            colors[i + 1] = t * 0.83 + (1 - t) * 0.71;
            colors[i + 2] = t * 1 + (1 - t) * 0.2;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        const particleMaterial = new THREE.PointsMaterial({
            size: 0.08, // Reduced from 0.1
            vertexColors: true,
            transparent: true,
            blending: THREE.AdditiveBlending,
        });
        const particles = new THREE.Points(particlesGeometry, particleMaterial);
        scene.add(particles);

        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        });

        function animateBackground() {
            requestAnimationFrame(animateBackground);
            const positions = particlesGeometry.attributes.position.array;
            for (let i = 0; i < particleCount * 3; i += 3) {
                positions[i] += velocities[i] + mouseX * 0.015; // Reduced from 0.02
                positions[i + 1] += velocities[i + 1] + mouseY * 0.015;
                positions[i + 2] += velocities[i + 2];
                if (positions[i] > 50) positions[i] -= 100;
                if (positions[i] < -50) positions[i] += 100;
                if (positions[i + 1] > 50) positions[i + 1] -= 100;
                if (positions[i + 1] < -50) positions[i + 1] += 100;
                if (positions[i + 2] > 50) positions[i + 2] -= 100;
                if (positions[i + 2] < -50) positions[i + 2] += 100;
            }
            particlesGeometry.attributes.position.needsUpdate = true;
            particles.rotation.y += 0.0005; // Reduced from 0.001
            renderer.render(scene, camera);
        }
        animateBackground();

        // Debounced resize handler
        const handleResize = debounce(() => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }, 100);
        window.addEventListener('resize', handleResize);

        // GSAP Animations
        gsap.utils.toArray('.section').forEach((section) => {
            gsap.from(section, {
                opacity: 0,
                y: 30, // Reduced from 50
                duration: 0.8, // Reduced from 1
                ease: 'power2.out',
                scrollTrigger: {
                    trigger: section,
                    start: 'top 90%',
                    toggleActions: 'play none none reverse',
                },
            });
        });

        // Data from the first code, with typo fixed
        const projects = [
            { title: "Syringe Pump using Arduino", image: "syring pump.jpg", description: "This project involves designing a syringe pump using Arduino for precise fluid delivery.", github: "https://github.com/Ahsan12152003/Syringe-Pump-Using-Arduino" },
            { title: "RNA Mutation Detector with GUI", image: "rna mutation detector.jpg", description: "A GUI-based tool to detect RNA mutations using bioinformatics algorithms.", github: "https://github.com/Ahsan12152003/RNA-Mutation-Detector" },
            { title: "Electronic Y Balance Test", image: "background.jpg", description: "An electronic system to measure Y balance for physical therapy applications.", github: "https://github.com/Ahsan12152003/Electronic-Y-test" },
            { title: "Interfacing with 8088 microprocessor", image: "mpi.jpg", description: "Interfacing peripherals with the 8088 microprocessor for embedded systems.", github: "https://github.com/Ahsan12152003/Lcd-Interfacing-with-8086-microprocessor" },
            { title: "Design a sequence detector using logic gates", image: "dld.jpg", description: "A digital logic design project to detect specific binary sequences.", github: "https://github.com/Ahsan12152003/Sequence-Detector-Using-Logic-Gates-" },
            { title: "Water Level Indicator", image: "BE.jpg", description: "A simple water level indicator using sensors and LEDs.", github: "https://github.com/Ahsan12152003/Water-Level-Indicator-Without-Sensor" },
            { title: "Non Invasive Glucometer", image: "glucometer.jpg", description: "Predicting diabetes risk using BPM and SpO2 data.", github: "https://github.com/Ahsan12152003/Non-Invasive-Glucometer" }
        ];

        const mlProjects = [
            { title: "Eye Open-Close Data Model", image: "eye model.jpg", description: "A machine learning model to detect eye open/close states from images.", github: "https://github.com/Ahsan12152003/Neurocomputation-Model-Training-ML" },
            { title: "Iris Flower Classification", image: "ml.jpg", description: "Classification of Iris flowers using machine learning algorithms.", github: "https://github.com/Ahsan12152003/Iris-Flower-Classification-ML-Model" },
            { title: "Predicting Diabetes with BPM and SpO2", image: "ml2.jpg", description: "Predicting diabetes risk using BPM and SpO2 data.", github: "https://github.com/Ahsan12152003/Predicting-Glucose-With-SPO2-And-BPM-ML-" },
            { title: "BMI Calculator & Health Risk Prediction", image: "bodymass.jpg", description: "A BMI calculator with health risk prediction using ML.", github: "https://github.com/Ahsan12152003/Health-Risk-Prediction-ML-Model" },
            { title: "Customer Churn Prediction", image: "churn.jpg", description: "Predicting customer churn using machine learning models.", github: "https://github.com/Ahsan12152003/Customer-Churn-Prediction-ML-model" },
            { title: "Image Compression using K-Means", image: "kmeans.png", description: "Image compression using the K-Means clustering algorithm.", github: "https://github.com/Ahsan12152003/Image-compression-using-K-means" }
        ];

        const internships = [
            { title: "Neurocomputation Lab", image: "ncl.png", description: "Completed a one-year internship gaining experience in data processing and training datasets." },
            { title: "Abbasi Shaheed Hospital", image: "abbasi2.png", description: "Gained hands-on experience with diagnostic and therapeutic medical devices, enhancing my understanding of their real-time clinical applications." },
            { title: "Ziauddin Hospital", image: "zia2.png", description: "Learned the working principles and maintenance protocols of biomedical equipment used in patient care." },
            { title: "Indus Hospital", image: "indus1.png", description: "Learned about device calibration and troubleshooting, deepening my practical knowledge of hospital-grade technologies." }
        ];

        const extracurricular = [
            { title: "3rd International Biomedical And Digital Health Conference", image: "3ibdc.png", description: "Participated in the IBDC Conference, engaging in discussions and activities related to biomedical engineering." },
            { title: "4th International Biomedical And Digital Health Conference", image: "4ibdc.png", description: "Attended the IBDC Conference, presented my poster presentation on my first electronic Y-Balance Device." }
        ];

        const posters = [
            { title: "Electronic Y-Balance Poster Presentation", image: "poster.png", description: "Presented a poster on our very own electronic Y-balance device, also shared the data of our tested individuals." },
            { title: "Development Of Vaccine Against Virus Poster Presentation", image: "post.png", description: "Presented my research poster on development of vaccine against Malaria." }
        ];

        const certifications = [
            { title: "Excel By Microsoft", image: "microsoft.png", description: "Acquired skills in creating and managing data for companies." },
            { title: "Preparing Data for Machine Learning", image: "dataml.png", description: "Learned techniques for cleaning, transforming, and preparing data for machine learning models." },
            { title: "Python for Machine Learning", image: "data2.png", description: "Mastered Python programming for implementing machine learning algorithms and data analysis." },
            { title: "Data Science Foundations", image: "data3.png", description: "Gained foundational knowledge in data science, including statistics, visualization, and modeling." },
            { title: "Business Analysis and Process Management", image: "business.png", description: "Studied business analysis techniques and process management for optimizing workflows." },
            { title: "Increase Engagement for Business", image: "engagement.png", description: "Explored strategies to boost customer engagement and retention in business contexts." },
            { title: "Google Ads for Beginners", image: "google.png", description: "Acquired skills in creating and managing Google Ads campaigns for marketing." }
        ];

        function loadContent() {
            const sections = [
                { id: 'projects', data: projects },
                { id: 'ml-projects', data: mlProjects },
                { id: 'internships', data: internships },
                { id: 'extracurricular', data: extracurricular },
                { id: 'posters', data: posters },
                { id: 'certifications', data: certifications }
            ];

            sections.forEach(({ id, data }) => {
                const container = document.getElementById(id);
                const canvas = container.querySelector(`#${id}-motion-canvas`);
                let motionScene, motionCamera, motionRenderer, particleSystems = [];

                // Only enable animations for Projects and ML Projects
                if (['projects', 'ml-projects'].includes(id)) {
                    motionScene = new THREE.Scene();
                    motionCamera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
                    motionRenderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
                    motionRenderer.setSize(container.offsetWidth, container.offsetHeight);
                    motionCamera.position.z = 15;

                    const motionParticleCount = window.innerWidth <= 768 ? 200 : 300; // Dynamic particle count for mobile
                    data.forEach(item => {
                        // Sanitize title for valid HTML ID
                        const safeId = item.title.replace(/[^a-zA-Z0-9-]/g, '-').replace(/-+/g, '-');
                        const div = document.createElement('div');
                        div.className = 'card';
                        div.innerHTML = `
                            <img src="${item.image}" alt="${item.title}">
                            <h3>${item.title}</h3>
                            <button class="btn" onclick="showPopup('${item.title}', '${item.description}', '${item.github || ''}')">View Details</button>
                        `;
                        container.appendChild(div);

                        // Create particle system for this card
                        const motionGeometry = new THREE.BufferGeometry();
                        const motionPosArray = new Float32Array(motionParticleCount * 3);
                        for (let i = 0; i < motionParticleCount * 3; i += 3) {
                            motionPosArray[i] = (Math.random() - 0.5) * 15;
                            motionPosArray[i + 1] = (Math.random() - 0.5) * 15;
                            motionPosArray[i + 2] = (Math.random() - 0.5) * 15;
                        }
                        motionGeometry.setAttribute('position', new THREE.BufferAttribute(motionPosArray, 3));
                        const motionMaterial = new THREE.PointsMaterial({
                            size: window.innerWidth <= 768 ? 0.15 : 0.2, // Smaller particles on mobile
                            color: 0x00b7cc,
                            transparent: true,
                            opacity: window.innerWidth <= 768 ? 0.6 : 0.8,
                        });
                        const motionParticles = new THREE.Points(motionGeometry, motionMaterial);

                        // Position particles within the card's bounds
                        motionParticles.userData.card = div;
                        particleSystems.push(motionParticles);
                        motionScene.add(motionParticles);
                    });

                    function animateMotion() {
                        requestAnimationFrame(animateMotion);
                        particleSystems.forEach((particles, index) => {
                            const card = particles.userData.card;
                            const rect = card.getBoundingClientRect();
                            const containerRect = container.getBoundingClientRect();
                            const x = ((rect.left + rect.right) / 2 - (containerRect.left + containerRect.right) / 2) / containerRect.width * 15;
                            const y = -((rect.top + rect.bottom) / 2 - (containerRect.top + containerRect.bottom) / 2) / containerRect.height * 15;
                            particles.position.set(x, y, 0);

                            const positions = particles.geometry.attributes.position.array;
                            const speed = window.innerWidth <= 768 ? 0.02 : 0.03; // Slower on mobile
                            for (let i = 0; i < motionParticleCount * 3; i += 3) {
                                positions[i] += (Math.random() - 0.5) * speed;
                                positions[i + 1] += (Math.random() - 0.5) * speed;
                                positions[i + 2] += (Math.random() - 0.5) * (speed / 2);
                                if (positions[i] > 7.5) positions[i] -= 15;
                                if (positions[i] < -7.5) positions[i] += 15;
                                if (positions[i + 1] > 7.5) positions[i + 1] -= 15;
                                if (positions[i + 1] < -7.5) positions[i + 1] += 15;
                                if (positions[i + 2] > 7.5) positions[i + 2] -= 15;
                                if (positions[i + 2] < -7.5) positions[i + 2] += 15;
                            }
                            particles.geometry.attributes.position.needsUpdate = true;
                            particles.rotation.x += 0.001; // Reduced from 0.002
                            particles.rotation.y += 0.001;
                        });
                        motionRenderer.render(motionScene, motionCamera);
                    }
                    animateMotion();

                    window.addEventListener('resize', debounce(() => {
                        motionCamera.aspect = container.offsetWidth / container.offsetHeight;
                        motionCamera.updateProjectionMatrix();
                        motionRenderer.setSize(container.offsetWidth, container.offsetHeight);
                    }, 100));
                } else {
                    // Render cards without animations for other sections
                    data.forEach(item => {
                        const safeId = item.title.replace(/[^a-zA-Z0-9-]/g, '-').replace(/-+/g, '-');
                        const div = document.createElement('div');
                        div.className = 'card';
                        div.innerHTML = `
                            <img src="${item.image}" alt="${item.title}">
                            <h3>${item.title}</h3>
                            <button class="btn" onclick="showPopup('${item.title}', '${item.description}', '${item.github || ''}')">View Details</button>
                        `;
                        container.appendChild(div);
                    });
                }
            });

            // Header 3D motion graphics
            const headerCanvas = document.getElementById('header-motion-canvas');
            const headerScene = new THREE.Scene();
            const headerCamera = new THREE.PerspectiveCamera(75, 900 / 240, 0.1, 1000);
            const headerRenderer = new THREE.WebGLRenderer({ canvas: headerCanvas, alpha: true });
            headerRenderer.setSize(900, 240);
            headerCamera.position.z = 20;

            const headerParticleCount = window.innerWidth <= 768 ? 800 : 1000; // Reduced from 1500
            const headerGeometry = new THREE.BufferGeometry();
            const headerPosArray = new Float32Array(headerParticleCount * 3);
            for (let i = 0; i < headerParticleCount * 3; i += 3) {
                headerPosArray[i] = (Math.random() - 0.5) * 25;
                headerPosArray[i + 1] = (Math.random() - 0.5) * 25;
                headerPosArray[i + 2] = (Math.random() - 0.5) * 25;
            }
            headerGeometry.setAttribute('position', new THREE.BufferAttribute(headerPosArray, 3));
            const headerMaterial = new THREE.PointsMaterial({
                size: window.innerWidth <= 768 ? 0.2 : 0.25, // Smaller on mobile
                color: 0x00b7cc,
                transparent: true,
                opacity: window.innerWidth <= 768 ? 0.5 : 0.7,
            });
            const headerParticles = new THREE.Points(headerGeometry, headerMaterial);
            headerScene.add(headerParticles);

            function animateHeader() {
                requestAnimationFrame(animateHeader);
                const positions = headerGeometry.attributes.position.array;
                const speed = window.innerWidth <= 768 ? 0.04 : 0.06; // Adjusted for mobile
                for (let i = 0; i < headerParticleCount * 3; i += 3) {
                    positions[i] += (Math.random() - 0.5) * speed;
                    positions[i + 1] += (Math.random() - 0.5) * speed;
                    positions[i + 2] += (Math.random() - 0.5) * (speed / 2);
                    if (positions[i] > 12.5) positions[i] -= 25;
                    if (positions[i] < -12.5) positions[i] += 25;
                    if (positions[i + 1] > 12.5) positions[i + 1] -= 25;
                    if (positions[i + 1] < -12.5) positions[i + 1] += 25;
                    if (positions[i + 2] > 12.5) positions[i + 2] -= 25;
                    if (positions[i + 2] < -12.5) positions[i + 2] += 25;
                }
                headerGeometry.attributes.position.needsUpdate = true;
                headerParticles.rotation.x += 0.0015; // Reduced from 0.003
                headerParticles.rotation.y += 0.0015;
                headerRenderer.render(headerScene, headerCamera);
            }
            animateHeader();

            // Re-apply GSAP for dynamically added cards
            gsap.utils.toArray('.card').forEach((card) => {
                card.addEventListener('mouseenter', () => {
                    gsap.to(card, { scale: 1.03, duration: 0.2, ease: 'power2.out' });
                });
                card.addEventListener('mouseleave', () => {
                    gsap.to(card, { scale: 1, duration: 0.2, ease: 'power2.out' });
                });
            });
        }

        function showPopup(title, description, github) {
            const popup = document.getElementById('popup');
            const overlay = document.getElementById('overlay');
            document.getElementById('popup-title').textContent = title;
            document.getElementById('popup-description').textContent = description;
            const githubDiv = document.getElementById('popup-github');
            const githubLink = document.getElementById('github-link');
            if (github) {
                githubDiv.style.display = 'block';
                githubLink.href = github;
            } else {
                githubDiv.style.display = 'none';
            }
            popup.classList.add('visible');
            overlay.classList.add('visible');
            gsap.fromTo(popup, { scale: 0 }, { scale: 1, duration: 0.3, ease: 'back.out(1.5)' });
            gsap.fromTo(overlay, { opacity: 0 }, { opacity: 1, duration: 0.3 });
        }

        function closePopup() {
            const popup = document.getElementById('popup');
            const overlay = document.getElementById('overlay');
            gsap.to(popup, { scale: 0, duration: 0.3, ease: 'back.in(1.5)', onComplete: () => {
                popup.classList.remove('visible');
            }});
            gsap.to(overlay, { opacity: 0, duration: 0.3, onComplete: () => {
                overlay.classList.remove('visible');
            }});
        }

        window.onload = loadContent;
    </script>
</body>
</html>